<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <div class="main"
        style="width: 100%; height: 100vh; display: flex; flex-direction: column; justify-content: center;align-items: center;">
        <div class="login"
            style="display: flex; flex-direction: column; justify-content: center;align-items: center; gap: 20px;">
            <h1>Login</h1>
            <input type="text" placeholder="Email" name="email" class="email">
            <input type="text" placeholder="Password" name="password" class="password">
            <button class="btn-login">Login</button>
            <button class="btn-refreshToken">Refresh</button>
        </div>
    </div>
    <script>
        const btnLogin = document.querySelector('.btn-login')
        const btnRefresh = document.querySelector('.btn-refreshToken')
        const email = document.querySelector('.email')
        const password = document.querySelector('.password')
        let refreshToken = null
        btnLogin.addEventListener('click', async () => {
            try {
                const res = await fetch('http://localhost:3000/users/login', {
                    method: "POST",
                    headers: {
                        "Content-Type": "application/json",
                    },
                    credentials: 'include',
                    body: JSON.stringify({ email: email.value, password: password.value }),
                })
                const result = await res.json()
                refreshToken = result.refreshToken
                console.log(result);
            } catch (error) {
                console.error("Error:", error);
            }
        })
        btnRefresh.addEventListener('click', async () => {
            try {
                const res = await fetch('http://localhost:3000/users/refresh', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    credentials: 'include',
                    body: JSON.stringify({ refreshToken })
                })
                const result = await res.json()
                refreshToken = result.refreshToken
                console.log(result);
            } catch (error) {
                console.error("Error:", error);
            }
        })
    </script>
</body>

</html>